<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>EPGN-calculate</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <link rel="stylesheet" href="layui/css/layui.css" media="all">
    <link rel="stylesheet" href="layui/css/admin.css" media="all">
    <script src="js/jquery-3.4.1.js"></script>
    <script type="text/javascript" src="js/vue_2.6.10.js"></script>
    <script type="text/javascript" src="js/axios-0.18.0.min.js"></script>
    <link rel="stylesheet" href="layui/css/modules/layer/default/layer.css">
</head>

<body class="layui-layout-body" layadmin-themealias="default">

    <div id="LAY_app" class="">
        <div class="layui-layout layui-layout-admin">
            <!-- 头部区域 -->
            <div class="layui-header">

                <!-- 左侧 -->
                <ul class="layui-nav layui-layout-left">

                    <!-- 侧边栏 -->
                    <li class="layui-nav-item layadmin-flexible" lay-unselect="">
                        <a href="javascript:;" layadmin-event="flexible" title="侧边栏">
                            <i class="layui-icon layui-icon-shrink-right" id="LAY_app_flexible"></i>
                        </a>
                    </li>

                    <!-- 超链接 -->
                    <li class="layui-nav-item layui-hide-xs" lay-unselect="">
                        <a href="http://www.baidu.com" target="_blank" title="超链接">
                            <i class="layui-icon layui-icon-website"></i>
                        </a>
                    </li>

                    <!-- 刷新 -->
                    <li class="layui-nav-item" lay-unselect="">
                        <a href="" layadmin-event="refresh" title="刷新">
                            <i class="layui-icon layui-icon-refresh-3"></i>
                        </a>
                    </li>

                    <!-- 搜索框 -->
                    <li class="layui-nav-item layui-hide-xs" lay-unselect="">
                        <input type="text" placeholder="搜索..." autocomplete="off" class="layui-input layui-input-search"
                            layadmin-event="serach" lay-action="template/search.html?keywords=">
                    </li>

                    <!-- 随着鼠标动的那条线 -->
                    <span class="layui-nav-bar" style="left: 38px; top: 48px; width: 0px; opacity: 0;"></span>

                </ul>

                <!-- 右侧 -->
                <ul class="layui-nav layui-layout-right" lay-filter="layadmin-layout-right">

                    <!-- 可以做超链接获取iframe页面 -->
                    <li class="layui-nav-item" lay-unselect="">
                        <a lay-href="app/message/index.html" layadmin-event="message" lay-text="消息中心">
                            <i class="layui-icon layui-icon-notice"></i>
                            <!-- 如果有新消息，则显示小圆点 -->
                        </a>
                    </li>

                    <!-- 右侧弹出 -->
                    <li class="layui-nav-item layui-hide-xs" lay-unselect="">
                        <a href="javascript:;" layadmin-event="theme">
                            <i class="layui-icon layui-icon-theme"></i>
                        </a>
                    </li>

                    <!-- 笔记本 -->
                    <li class="layui-nav-item layui-hide-xs" lay-unselect="">
                        <a href="javascript:;" layadmin-event="note">
                            <i class="layui-icon layui-icon-note"></i>
                        </a>
                    </li>

                    <!-- 全屏 -->
                    <li class="layui-nav-item layui-hide-xs" lay-unselect="">
                        <a href="javascript:;" layadmin-event="fullscreen">
                            <i class="layui-icon layui-icon-screen-full"></i>
                        </a>
                    </li>

                    <!-- 用户信息 -->
                    <li class="layui-nav-item" lay-unselect="">
                        <a href="javascript:;">
                            <cite>贤心</cite>
                            <span class="layui-nav-more"></span></a>
                        <dl class="layui-nav-child layui-anim layui-anim-upbit">
                            <dd><a lay-href="set/user/info.html">基本资料</a></dd>
                            <dd><a lay-href="set/user/password.html">修改密码</a></dd>
                            <hr>
                            <dd layadmin-event="logout" style="text-align: center;"><a>退出</a></dd>
                        </dl>
                    </li>

                    <!-- 右侧弹出 -->
                    <li class="layui-nav-item layui-hide-xs" lay-unselect="">
                        <a href="javascript:;" layadmin-event="about">
                            <i class="layui-icon layui-icon-more-vertical"></i>
                        </a>
                    </li>

                    <!-- 这是什么 -->
                    <li class="layui-nav-item layui-show-xs-inline-block layui-hide-sm" lay-unselect="">
                        <a href="javascript:;" layadmin-event="more">
                            <i class="layui-icon layui-icon-more-vertical"></i>
                        </a>
                    </li>
                    <span class="layui-nav-bar" style="left: 28px; top: 48px; width: 0px; opacity: 0;"></span>
                </ul>

                <hr class="layui-bg-g" style="margin-top: 2.6%">

            </div>

            <!-- 侧边菜单 -->
            <div class="layui-side layui-side-menu">
                <div class="layui-side-scroll">
                    <!-- logo -->
                    <div class="layui-logo">
                        <a href="index.html">
                            <span>EPGN INFO 2.0</span>
                        </a>
                    </div>
                    <ul class="layui-nav layui-nav-tree" lay-shrink="all" id="LAY-system-side-menu"
                        lay-filter="layadmin-system-side-menu">
                        <li data-name="get" class="layui-nav-item">
                            <a href="index.html" lay-tips="主页" lay-direction="2">
                                <i class="layui-icon layui-icon-home"></i>
                                <cite>主页</cite>
                            </a>
                        </li>
                        <li data-name="get" class="layui-nav-item">
                            <a href="upload.html" lay-tips="上传" lay-direction="2">
                                <i class="layui-icon layui-icon-upload-circle"></i>
                                <cite>上传</cite>
                            </a>
                        </li>
                        <li data-name="home" class="layui-nav-item">
                            <a href="javascript:;" lay-tips="检索" lay-direction="2">
                                <i class="layui-icon layui-icon-search"></i>
                                <cite>检索</cite>
                                <span class="layui-nav-more"></span></a>
                            <dl class="layui-nav-child">
                                <dd data-name="console">
                                    <a href="mqb27.html">MQB 27</a>
                                </dd>
                                <dd data-name="console">
                                    <a href="mqb37.html">MQB 37</a>
                                </dd>
                                <dd data-name="console">
                                    <a href="mqb37a.html">MQB 37A</a>
                                </dd>
                                <dd data-name="console">
                                    <a href="mqb37w.html">MQB 37W</a>
                                </dd>
                                <dd data-name="console">
                                    <a href="mqb41b.html">MQB 41B</a>
                                </dd>
                                <dd data-name="console">
                                    <a href="mqb48.html">MQB 48</a>
                                </dd>
                                <dd data-name="console">
                                    <a href="meb.html">MEB</a>
                                </dd>
                                <dd data-name="console">
                                    <a href="mlb.html">MLB</a>
                                </dd>
                                <dd data-name="console">
                                    <a href="pq25.html">PQ 25</a>
                                </dd>
                                <dd data-name="console">
                                    <a href="pq34.html">PQ 34</a>
                                </dd>
                                <dd data-name="console">
                                    <a href="pq35.html">PQ 35</a>
                                </dd>

                            </dl>
                        </li>
                        <li data-name="get" class="layui-nav-item layui-this">
                            <a href="#" lay-tips="算法" lay-direction="2">
                                <i class="layui-icon layui-icon-upload-circle"></i>
                                <cite>算法</cite>
                            </a>
                        </li>
                        <li data-name="get" class="layui-nav-item">
                            <a href="search.html" lay-tips="高级搜索" lay-direction="2">
                                <i class="layui-icon layui-icon-auz"></i>
                                <cite>高级搜索</cite>
                            </a>
                        </li>
                        <span class="layui-nav-bar" style="top: 308px; height: 0px; opacity: 0;"></span>
                    </ul>
                </div>
            </div>
            <!-- 主体内容 -->
            <div class="layui-body" id="LAY_app_body" style="top:5%">
                <div class="layui-fluid">
                    <!-- 左侧从cookie中获取到的数据 -->
                    <div style="float: left;">

                        <!-- 已选数据的筛选在这里使用layui中的表格实现 ==> 显示一个文件名，同时添加右上方的功能区 -->
                        <div class="layui-btn-group demoTable" style="margin-right: 10px">
                            <button class="layui-btn layui-btn-sm"" data-type=" getCheckData"
                                style="margin-top: 10px;height: 37.89px">获取</button>
                        </div>
                        <div class="layui-form" style="float: left;width: 155px;margin-top: 10px;">
                            <select name="direction" lay-verify="required" id="direction" lay-search="">
                                <option value="">搜索关键字</option>
                                <option value="1">这里显示勾选的文件名</option>
                            </select>
                        </div>
                        <table id="data" lay-filter="test"></table>
                    </div>

                    <!-- 右侧关于算法部分==>Tab样式 -->
                    <div class="layui-form layui-tab layui-tab-card" style="width:83%;float: left;">
                        <!-- <form class="layui-form" action="" lay-filter="example" style="margin-top: 10px"> -->
                        <div class="layui-inline">
                            <label class="layui-form-label">算法选择:</label>
                            <div class="layui-input-inline">
                                <select name="modules" lay-verify="required" id="calculate" lay-search="">
                                    <option value="">直接选择或搜索选择</option>
                                    <option value="1">FFT</option>
                                    <option value="2">倍频程</option>
                                </select>
                            </div>
                        </div>
                        <div class="layui-form-item" style="margin-top: 10px">
                            <label class="layui-form-label">复选框</label>
                            <div class="layui-input-block">
                                <input type="checkbox" name="pipeline" title="VL" value="VL">
                                <input type="checkbox" name="pipeline" title="VR" value="VR" checked="">
                            </div>
                        </div>
                        <div class="layui-form-item">
                            <div class="layui-input-block">
                                <button class="layui-btn" id="run"> Run </button>
                                <button type="reset" class="layui-btn layui-btn-normal">Reset</button>
                            </div>
                        </div>
                        <!-- </form> -->

                        <!-- <ul class="layui-tab-title">
                            <li class="layui-this">FFT</li>
                            <li>1/3倍频程</li>
                        </ul> -->
                        <!-- 这里对应上面li标签里面的内容 -->
                        <div class="layui-tab-content" style="height: auto;">
                            <div class="layui-tab-item layui-show">
                                <div style="text-align: center">
                                    <img src="./image/back.jpg" alt="算法处理的结果" style="width: 1000px; ">
                                    <h2>这里发送算法的处理结果</h2>
                                </div>
                            </div>
                        </div>

                        <button class="layui-btn" lay-submit="" lay-filter="demo1"
                            style="margin: 0px 10px 10px 0px; float: right"">立即导出</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
        
    <script src=" layui/layui.js"> </script> <script>
                            layui.config({
                            base: './home/' //静态资源所在路径
                            }).use('index', function () {
                            var $ = layui.jquery,
                            layer = layui.layer,
                            admin = layui.admin,
                            element = layui.element,
                            table = layui.table,
                            form = layui.form;
                            });
                            </script>
                            <script>
                                $("#run").click(function () {
                                    obj = document.getElementsByName("pipeline")
                                    check_pipeline = {}
                                    for (i in obj) {
                                        if (obj[i].checked) {
                                            check_pipeline[i] = obj[i].value;
                                        }
                                    }
                                    // layer.msg('发送请求, 返回当前提交数据返回的算法处理结果');
                                    $.ajax({
                                        url: /calculate/,
                                        data: {
                                            "data": {
                                                "calculate": $("#calculate").val(),
                                                "pipeline": check_pipeline,
                                            }
                                        },
                                        dataType: "json",
                                        type: "post",
                                        success: function (result) {
                                            $('#jumpbox').html(result);
                                            $('#jumpbox').modal('show');
                                        }
                                    });
                                })
                            </script>

                            <!-- 表格 -->
                            <script>
                                layui.use(['form', 'table'], function () {
                                    var $ = layui.jquery,
                                        table = layui.table;

                                    //方法级渲染
                                    tableIns = table.render({
                                        width: 200,
                                        elem: '#data',
                                        page: false,
                                        height: 'full-130',
                                        // height: 800,
                                        url: "http://127.0.0.1:8000/car/",
                                        cols: [
                                            [{
                                                type: 'checkbox',
                                                LAY_CHECKED: true,
                                            }, {
                                                field: 'file_name',
                                                title: '文件名',
                                                unresize: true,
                                            }]
                                        ],
                                    });

                                    var $ = layui.$,
                                        active = {
                                            getCheckData: function () { //获取选中数据
                                                var checkStatus = table.checkStatus('idTest'),
                                                    data = checkStatus.data;
                                                layer.alert(JSON.stringify(data));
                                            }
                                        };
                                });
                            </script>

</body>

</html>