from pprint import pprint

import pandas as pd
from django.test import TestCase

# ave_items = [
#     {'data': {'X': [0.0000e+00, 5.0000e-01, 1.0000e+00, ..., 4.0950e+03, 4.0955e+03,
#                     4.0960e+03], 'Y': [-9.86942044, 1.65740654, 6.17372882, ..., -18.63486427,
#                                        -18.02977787, -25.18022477]},
#      'filename': '2020-03-31_kp 80-20 run01.hdf', 'channel': 'hinten rechits'},
#     {'data': {'X': [0.0000e+00, 5.0000e-01, 1.0000e+00, ..., 4.0950e+03, 4.0955e+03,
#                     4.0960e+03], 'Y': [-10.10497252, 1.25190129, 6.03023193, ..., -18.62132261,
#                                        -17.84032394, -22.65120583]},
#      'filename': '2020-03-31_kp 80-20 run01.hdf', 'channel': 'vorn links'},
#     {'data': {'X': [0.0000e+00, 5.0000e-01, 1.0000e+00, ..., 4.0950e+03, 4.0955e+03,
#                     4.0960e+03], 'Y': [-10.61853351, 1.02252394, 6.10396823, ..., -18.46542285,
#                                        -19.4976512, -27.26486135]},
#      'filename': '2020-03-31_kp 80-20 run01.hdf', 'channel': 'hinten links'},
#     {'data': {'X': [0.0000e+00, 5.0000e-01, 1.0000e+00, ..., 4.0950e+03, 4.0955e+03,
#                     4.0960e+03], 'Y': [-9.87258805, 1.51855214, 5.8454067, ..., -17.5820035,
#                                        -19.93089012, -26.22938148]},
#      'filename': '2020-03-31_kp 80-20 run01.hdf', 'channel': 'vorn rechits'},
#     {'data': {'X': [0.0000e+00, 5.0000e-01, 1.0000e+00, ..., 4.0950e+03, 4.0955e+03,
#                     4.0960e+03], 'Y': [-10.61853351, 1.02252394, 6.10396823, ..., -18.46542285,
#                                        -19.4976512, -27.26486135]},
#      'filename': '2020-03-31_kp 80-20 run03.hdf', 'channel': 'hinten links'},
#     {'data': {'X': [0.0000e+00, 5.0000e-01, 1.0000e+00, ..., 4.0950e+03, 4.0955e+03,
#                     4.0960e+03], 'Y': [-10.10497252, 1.25190129, 6.03023193, ..., -18.62132261,
#                                        -17.84032394, -22.65120583]},
#      'filename': '2020-03-31_kp 80-20 run03.hdf', 'channel': 'vorn links'},
#     {'data': {'X': [0.0000e+00, 5.0000e-01, 1.0000e+00, ..., 4.0950e+03, 4.0955e+03,
#                     4.0960e+03], 'Y': [-9.86942044, 1.65740654, 6.17372882, ..., -18.63486427,
#                                        -18.02977787, -25.18022477]},
#      'filename': '2020-03-31_kp 80-20 run03.hdf', 'channel': 'hinten rechits'},
#     {'data': {'X': [0.0000e+00, 5.0000e-01, 1.0000e+00, ..., 4.0950e+03, 4.0955e+03,
#                     4.0960e+03], 'Y': [-9.87258805, 1.51855214, 5.8454067, ..., -17.5820035,
#                                        -19.93089012, -26.22938148]},
#      'filename': '2020-03-31_kp 80-20 run03.hdf', 'channel': 'vorn rechits'},
#     {'data': {'X': [0.0000e+00, 5.0000e-01, 1.0000e+00, ..., 4.0950e+03, 4.0955e+03,
#                     4.0960e+03], 'Y': [-9.87258805, 1.51855214, 5.8454067, ..., -17.5820035,
#                                        -19.93089012, -26.22938148]},
#      'filename': '2020-03-31_kp 80-20 run02.hdf', 'channel': 'vorn rechits'},
#     {'data': {'X': [0.0000e+00, 5.0000e-01, 1.0000e+00, ..., 4.0950e+03, 4.0955e+03,
#                     4.0960e+03], 'Y': [-10.10497252, 1.25190129, 6.03023193, ..., -18.62132261,
#                                        -17.84032394, -22.65120583]},
#      'filename': '2020-03-31_kp 80-20 run02.hdf', 'channel': 'vorn links'},
#     {'data': {'X': [0.0000e+00, 5.0000e-01, 1.0000e+00, ..., 4.0950e+03, 4.0955e+03,
#                     4.0960e+03], 'Y': [-10.61853351, 1.02252394, 6.10396823, ..., -18.46542285,
#                                        -19.4976512, -27.26486135]},
#      'filename': '2020-03-31_kp 80-20 run02.hdf', 'channel': 'hinten links'},
#     {'data': {'X': [0.0000e+00, 5.0000e-01, 1.0000e+00, ..., 4.0950e+03, 4.0955e+03,
#                     4.0960e+03], 'Y': [-9.86942044, 1.65740654, 6.17372882, ..., -18.63486427,
#                                        -18.02977787, -25.18022477]},
#      'filename': '2020-03-31_kp 80-20 run02.hdf', 'channel': 'hinten rechits'}
# ]
#
# df = pd.DataFrame(ave_items)
#
# # 注意这个地方使用方式
# result = [{"filename": k, "status": j, "info": g["data"].tolist()} for k, j, g in df.groupby("channel")]

# for channels in result:
#     y1 = channels["info"][0]["Y"]  # 我怎么知道这里是多少个，用公式==> y(len(channels)) = channels["info"][len(channels)-1]
#     y2 = channels["info"][1]["Y"]
#     y3 = channels["info"][2]["Y"]
#
#     y_list = []
#     for i in range(len(y1)):
#         y = (y1[i] + y2[i] + y3[i]) / int(len(channels))
#         y_list.append(y)
#
#     data = [{"X": channels["info"][2]["X"], "Y": y_list}]
#
# ML_A_X = []
# ML_A_y = []
